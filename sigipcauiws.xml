<?xml version="1.0" encoding="UTF-8"?>
<con:testSuite id="6b85cb06-5a83-48c8-9bbb-c40bef8302d0" name="TestSuite 1" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="48f39fb4-62d3-42f2-8a9e-cc422464c3ee" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase 1" searchProperties="true"><con:settings/><con:testStep type="request" id="f1c9bc1a-4ff2-43d5-83e4-7aeb83158a98" name="SigipimpcauAcores"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SigipimpcauPortSoap11</con:interface><con:operation>Sigipimpcau</con:operation><con:request name="SigipimpcauAcores" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="925baeba-09c1-4ade-b9f8-2267b94067b9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://sigipcauiws.tainfpautaldev.ritta.local:80/sigipcauiws/ws</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://schema.soap.web.sigipimpcau.sigip.at.gov.pt">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:SigipimpcauRequest>
         <sch:request>
            <!--Optional:-->
            <sch:VersionNumber>15</sch:VersionNumber>
            <sch:ModificationDate>2008-09-28</sch:ModificationDate>
            <sch:LocalReferenceNumber>21PT980112664200000152</sch:LocalReferenceNumber>
            <sch:TemporaryNumber>123456789012345678</sch:TemporaryNumber>
            <!--Optional:-->
            <sch:DeclarationNumber>123456789012345678</sch:DeclarationNumber>
            <sch:Date>2023-04-13</sch:Date>
            <sch:H6Flag>1</sch:H6Flag>
            <sch:DeclarationCustomsOffice>PT001964</sch:DeclarationCustomsOffice>
            <!--<sch:DeclarationCustomsOffice>PT000095</sch:DeclarationCustomsOffice>-->
            <sch:GoodsPresentationCustomsOffice>12345678</sch:GoodsPresentationCustomsOffice>
            <!--Optional:-->
            <sch:GrossMass>100</sch:GrossMass>
            <!--0 to 99 repetitions:-->            
            <!--Optional:-->
            <sch:AdditionalInformation>
             <sch:Code>12345</sch:Code>
             <sch:Text>1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901</sch:Text>
            </sch:AdditionalInformation>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <!--<sch:SupportDocument>
            <sch:Type>U090</sch:Type>
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:SupportDocument>-->
            <!--0 to 99 repetitions:-->
            <!--Optional:-->
            <sch:AdditionalReference>
             <sch:Type>Y063</sch:Type>
               <!--Optional:-->
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:AdditionalReference>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <sch:TransportDocument>
            <sch:Type>U110</sch:Type>
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:TransportDocument>
            <sch:TransportDocument>
            <sch:Type>C640</sch:Type>
            <sch:ReferenceNumber>121867890</sch:ReferenceNumber>
            </sch:TransportDocument>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <!--<sch:Authorization>
            <sch:Type>D018</sch:Type>
            <sch:ReferenceNumber>12345678901234567890123456789012345</sch:ReferenceNumber>
             <sch:HolderEORINumber>12345678901234567</sch:HolderEORINumber>
            </sch:Authorization>-->
            <!--Optional:-->
            <sch:SimplifiedAuthorizationFlag>1</sch:SimplifiedAuthorizationFlag>
            <sch:DestinationCountry>CH</sch:DestinationCountry>
            <sch:DispatchingCountry>AL</sch:DispatchingCountry>
             <!--continente-->
            <!--<sch:RegionalCode>50A</sch:RegionalCode>-->
             <!--açores-->
            <sch:RegionalCode>60A</sch:RegionalCode>
             <!--madeira-->
            <!--<sch:RegionalCode>70A</sch:RegionalCode>-->
            <sch:SystemId>0</sch:SystemId>
           <sch:DeclUser>10rfrfrf</sch:DeclUser>
            <!--1 to 5000 repetitions:-->
            <sch:Additions>
               <sch:AdditionNumber>1</sch:AdditionNumber>
               <!--Optional:-->
              <sch:SuplementaryUnit>20</sch:SuplementaryUnit>
               <!--Optional:-->
               <!--<sch:Usfi>20</sch:Usfi>-->
               <!--Optional:-->
               <sch:GrossMass>100</sch:GrossMass>
               <!--Optional:-->
               <sch:NetMass>100</sch:NetMass>
               <!--Optional:-->
              <sch:CusCode>C12345678</sch:CusCode>
               <!--Optional:-->               
               <sch:GoodsCodeSH>010290</sch:GoodsCodeSH>
               <!--Optional:-->
               <sch:GoodsCodeNC>29</sch:GoodsCodeNC>
               <!--Optional:-->
               <sch:GoodsCodeTARIC>30</sch:GoodsCodeTARIC>
               <!--Optional:-->
               <sch:OriginCountryCode>AL</sch:OriginCountryCode>
               <!--Optional:-->
               <sch:PreferredOriginCountry>BR</sch:PreferredOriginCountry>
               <!--Optional:-->
               <sch:DestinationCountry>ES</sch:DestinationCountry>
               <!--Optional:-->
               <!--<sch:DispatchingCountry>CA</sch:DispatchingCountry>-->
               <!--Optional:-->
               <sch:Preference>123</sch:Preference>
               <!--Optional:-->
               <sch:RequestedRegime>12</sch:RequestedRegime>
               <!--0 to 99 repetitions:-->
               <sch:AdditionalRegime>4II</sch:AdditionalRegime>
               <!--Optional:-->
               <!--<sch:QuotaOrderNumber>090113</sch:QuotaOrderNumber>-->
               <!--Optional:-->
               <sch:StatisticalValue>1234567890123456.45</sch:StatisticalValue>
               <!--Optional:-->
               <sch:ValuationMethod>1</sch:ValuationMethod>
               <!--0 to 99 repetitions:-->
               <!--Optional:-->
               <sch:TaxBase>
                  <sch:MeasureUnitAndQualifier>TNEG</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>0.100</sch:Quantity>
               </sch:TaxBase>
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <!--<sch:UnitsForRestrictions>
                  <sch:MeasureUnitAndQualifier>KGM</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>100</sch:Quantity>
               </sch:UnitsForRestrictions>-->
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <sch:UnitsForH6>
                 <sch:MeasureUnitAndQualifier>KGM</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>100</sch:Quantity>
               </sch:UnitsForH6>
               <sch:VatRegime>3</sch:VatRegime>
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <sch:AdditionalInformation>
                <sch:Code>34567</sch:Code>
                <sch:Text>234234?</sch:Text>
               </sch:AdditionalInformation>
               <!--0 to 99 repetitions:-->
               <sch:SupportDocument>
                  <sch:Type>U110</sch:Type>
                  <sch:ReferenceNumber>12345</sch:ReferenceNumber>
                   <!--este campo abaixo só pode ser usado nos adicionais:-->
                  <sch:MeasureUnitAndQualifier>1234</sch:MeasureUnitAndQualifier>
               </sch:SupportDocument>
               <!--0 to 99 repetitions:-->
               <sch:AdditionalReference>
                 <sch:Type>3Y48</sch:Type>
                 <sch:ReferenceNumber>12345688</sch:ReferenceNumber>
               </sch:AdditionalReference>
               <!--0 to 99 repetitions:-->
               <!--<sch:TransportDocument>
                <sch:Type>1234</sch:Type>
                <sch:ReferenceNumber>1234</sch:ReferenceNumber>
               </sch:TransportDocument>-->
               <!--0 to 99 repetitions:-->
               <!--<sch:Authorization>
               <sch:Type>1234</sch:Type>
               <sch:ReferenceNumber>12345678901234567890123567890123455</sch:ReferenceNumber>
               <sch:HolderEORINumber>12345678901234567</sch:HolderEORINumber>
               </sch:Authorization>-->
               <!--0 to 99 repetitions:-->
               <sch:SimplifiedAuthorizationFlag>0</sch:SimplifiedAuthorizationFlag>
              <sch:NationalAdditionalCode>1060</sch:NationalAdditionalCode>
               <!--<sch:NationalAdditionalCode>1041</sch:NationalAdditionalCode>-->
                <!--0 to 99 repetitions:-->
                <!--<sch:AdditionalCodeTARIC>F499</sch:AdditionalCodeTARIC>-->
                <!--<sch:AdditionalCodeTARIC>3200</sch:AdditionalCodeTARIC>-->
               <!--Optional:-->
              <sch:CustomsValue>1500</sch:CustomsValue>            
             </sch:Additions>
         </sch:request>
      </sch:SigipimpcauRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="bdf4b22e-d6e5-45f7-9174-950db4d33d88" name="SOAP Response"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://schema.soap.web.sigipimpcau.sigip.at.gov.pt/SigipimpcauPort/SigipimpcauRequest"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="acoresAssertion" id="fd478161-0e1c-4ef3-9bd6-bc09b03d482f"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils
import com.eviware.soapui.support.XmlHolder

def xmlReq = testRunner.testCase.testSteps['SigipimpcauAcores'].getPropertyValue("response")
def xmlReq1 = new XmlHolder(xmlReq)

for( node in xmlReq1.getDomNodes( "//*:SigipimpcauResponse/*:response/*:Additions/*:MeasureListPerAddition" )) {
	//log.info(node)
	//log.info("--")
	def applicableMeasure = new XmlHolder(node).getNodeValue("//*:ApplicableMeasure")
	log.info(applicableMeasure)
	if(applicableMeasure == 'IVA'){
		def applicableFee = new XmlHolder(node).getNodeValue("//*:Fee")
		assert (applicableFee.toFloat() == 0.16f)
	}	
}</script></con:config></con:testStep><con:testStep type="request" id="3c6c809e-4027-4d30-a753-fb5674ddb36f" name="SigipimpcauContinente"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SigipimpcauPortSoap11</con:interface><con:operation>Sigipimpcau</con:operation><con:request name="SigipimpcauContinente" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e308e183-d506-44ee-822c-da3f50ab7433"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://sigipcauiws.tainfpautaldev.ritta.local:80/sigipcauiws/ws</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://schema.soap.web.sigipimpcau.sigip.at.gov.pt">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:SigipimpcauRequest>
         <sch:request>
            <!--Optional:-->
            <sch:VersionNumber>15</sch:VersionNumber>
            <sch:ModificationDate>2008-09-28</sch:ModificationDate>
            <sch:LocalReferenceNumber>21PT980112664200000152</sch:LocalReferenceNumber>
            <sch:TemporaryNumber>123456789012345678</sch:TemporaryNumber>
            <!--Optional:-->
            <sch:DeclarationNumber>123456789012345678</sch:DeclarationNumber>
            <sch:Date>2023-04-13</sch:Date>
            <sch:H6Flag>1</sch:H6Flag>
            <sch:DeclarationCustomsOffice>PT001964</sch:DeclarationCustomsOffice>
            <!--<sch:DeclarationCustomsOffice>PT000095</sch:DeclarationCustomsOffice>-->
            <sch:GoodsPresentationCustomsOffice>12345678</sch:GoodsPresentationCustomsOffice>
            <!--Optional:-->
            <sch:GrossMass>100</sch:GrossMass>
            <!--0 to 99 repetitions:-->            
            <!--Optional:-->
            <sch:AdditionalInformation>
             <sch:Code>12345</sch:Code>
             <sch:Text>1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901</sch:Text>
            </sch:AdditionalInformation>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <!--<sch:SupportDocument>
            <sch:Type>U090</sch:Type>
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:SupportDocument>-->
            <!--0 to 99 repetitions:-->
            <!--Optional:-->
            <sch:AdditionalReference>
             <sch:Type>Y063</sch:Type>
               <!--Optional:-->
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:AdditionalReference>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <sch:TransportDocument>
            <sch:Type>U110</sch:Type>
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:TransportDocument>
            <sch:TransportDocument>
            <sch:Type>C640</sch:Type>
            <sch:ReferenceNumber>121867890</sch:ReferenceNumber>
            </sch:TransportDocument>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <!--<sch:Authorization>
            <sch:Type>D018</sch:Type>
            <sch:ReferenceNumber>12345678901234567890123456789012345</sch:ReferenceNumber>
             <sch:HolderEORINumber>12345678901234567</sch:HolderEORINumber>
            </sch:Authorization>-->
            <!--Optional:-->
            <sch:SimplifiedAuthorizationFlag>1</sch:SimplifiedAuthorizationFlag>
            <sch:DestinationCountry>CH</sch:DestinationCountry>
            <sch:DispatchingCountry>AL</sch:DispatchingCountry>
             <!--continente-->
            <sch:RegionalCode>50A</sch:RegionalCode>
             <!--açores-->
            <!--<sch:RegionalCode>60A</sch:RegionalCode>-->
             <!--madeira-->
            <!--<sch:RegionalCode>70A</sch:RegionalCode>-->
            <sch:SystemId>0</sch:SystemId>
           <sch:DeclUser>10rfrfrf</sch:DeclUser>
            <!--1 to 5000 repetitions:-->
            <sch:Additions>
               <sch:AdditionNumber>1</sch:AdditionNumber>
               <!--Optional:-->
              <sch:SuplementaryUnit>20</sch:SuplementaryUnit>
               <!--Optional:-->
               <!--<sch:Usfi>20</sch:Usfi>-->
               <!--Optional:-->
               <sch:GrossMass>100</sch:GrossMass>
               <!--Optional:-->
               <sch:NetMass>100</sch:NetMass>
               <!--Optional:-->
              <sch:CusCode>C12345678</sch:CusCode>
               <!--Optional:-->               
               <sch:GoodsCodeSH>010290</sch:GoodsCodeSH>
               <!--Optional:-->
               <sch:GoodsCodeNC>29</sch:GoodsCodeNC>
               <!--Optional:-->
               <sch:GoodsCodeTARIC>30</sch:GoodsCodeTARIC>
               <!--Optional:-->
               <sch:OriginCountryCode>AL</sch:OriginCountryCode>
               <!--Optional:-->
               <sch:PreferredOriginCountry>BR</sch:PreferredOriginCountry>
               <!--Optional:-->
               <sch:DestinationCountry>ES</sch:DestinationCountry>
               <!--Optional:-->
               <!--<sch:DispatchingCountry>CA</sch:DispatchingCountry>-->
               <!--Optional:-->
               <sch:Preference>123</sch:Preference>
               <!--Optional:-->
               <sch:RequestedRegime>12</sch:RequestedRegime>
               <!--0 to 99 repetitions:-->
               <sch:AdditionalRegime>4II</sch:AdditionalRegime>
               <!--Optional:-->
               <!--<sch:QuotaOrderNumber>090113</sch:QuotaOrderNumber>-->
               <!--Optional:-->
               <sch:StatisticalValue>1234567890123456.45</sch:StatisticalValue>
               <!--Optional:-->
               <sch:ValuationMethod>1</sch:ValuationMethod>
               <!--0 to 99 repetitions:-->
               <!--Optional:-->
               <sch:TaxBase>
                  <sch:MeasureUnitAndQualifier>TNEG</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>0.100</sch:Quantity>
               </sch:TaxBase>
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <!--<sch:UnitsForRestrictions>
                  <sch:MeasureUnitAndQualifier>KGM</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>100</sch:Quantity>
               </sch:UnitsForRestrictions>-->
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <sch:UnitsForH6>
                 <sch:MeasureUnitAndQualifier>KGM</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>100</sch:Quantity>
               </sch:UnitsForH6>
               <sch:VatRegime>3</sch:VatRegime>
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <sch:AdditionalInformation>
                <sch:Code>34567</sch:Code>
                <sch:Text>234234?</sch:Text>
               </sch:AdditionalInformation>
               <!--0 to 99 repetitions:-->
               <sch:SupportDocument>
                  <sch:Type>U110</sch:Type>
                  <sch:ReferenceNumber>12345</sch:ReferenceNumber>
                   <!--este campo abaixo só pode ser usado nos adicionais:-->
                  <sch:MeasureUnitAndQualifier>1234</sch:MeasureUnitAndQualifier>
               </sch:SupportDocument>
               <!--0 to 99 repetitions:-->
               <sch:AdditionalReference>
                 <sch:Type>3Y48</sch:Type>
                 <sch:ReferenceNumber>12345688</sch:ReferenceNumber>
               </sch:AdditionalReference>
               <!--0 to 99 repetitions:-->
               <!--<sch:TransportDocument>
                <sch:Type>1234</sch:Type>
                <sch:ReferenceNumber>1234</sch:ReferenceNumber>
               </sch:TransportDocument>-->
               <!--0 to 99 repetitions:-->
               <!--<sch:Authorization>
               <sch:Type>1234</sch:Type>
               <sch:ReferenceNumber>12345678901234567890123567890123455</sch:ReferenceNumber>
               <sch:HolderEORINumber>12345678901234567</sch:HolderEORINumber>
               </sch:Authorization>-->
               <!--0 to 99 repetitions:-->
               <sch:SimplifiedAuthorizationFlag>0</sch:SimplifiedAuthorizationFlag>
              <sch:NationalAdditionalCode>1060</sch:NationalAdditionalCode>
               <!--<sch:NationalAdditionalCode>1041</sch:NationalAdditionalCode>-->
                <!--0 to 99 repetitions:-->
                <!--<sch:AdditionalCodeTARIC>F499</sch:AdditionalCodeTARIC>-->
                <!--<sch:AdditionalCodeTARIC>3200</sch:AdditionalCodeTARIC>-->
               <!--Optional:-->
              <sch:CustomsValue>1500</sch:CustomsValue>            
             </sch:Additions>
         </sch:request>
      </sch:SigipimpcauRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="5a4322e4-e8a8-4887-b4e2-2eb28d9a7cfb" name="SOAP Response"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://schema.soap.web.sigipimpcau.sigip.at.gov.pt/SigipimpcauPort/SigipimpcauRequest"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="continenteAssertion" id="1efec8ef-d074-4170-863a-75a9820d78e4"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils
import com.eviware.soapui.support.XmlHolder

def xmlReq = testRunner.testCase.testSteps['SigipimpcauContinente'].getPropertyValue("response")
def xmlReq1 = new XmlHolder(xmlReq)

for( node in xmlReq1.getDomNodes( "//*:SigipimpcauResponse/*:response/*:Additions/*:MeasureListPerAddition" )) {
	//log.info(node)
	//log.info("--")
	def applicableMeasure = new XmlHolder(node).getNodeValue("//*:ApplicableMeasure")
	log.info(applicableMeasure)
	if(applicableMeasure == 'IVA'){
		def applicableFee = new XmlHolder(node).getNodeValue("//*:Fee")
		assert (applicableFee.toFloat() == 0.23f)
	}	
}</script></con:config></con:testStep><con:testStep type="request" id="5031df74-982e-49d6-a0bd-47eab4c9bea4" name="SigipimpcauMadeira"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>SigipimpcauPortSoap11</con:interface><con:operation>Sigipimpcau</con:operation><con:request name="SigipimpcauMadeira" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="16634575-fe99-4651-b1ef-393fe6a75534"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://sigipcauiws.tainfpautaldev.ritta.local:80/sigipcauiws/ws</con:endpoint><con:request><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://schema.soap.web.sigipimpcau.sigip.at.gov.pt">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:SigipimpcauRequest>
         <sch:request>
            <!--Optional:-->
            <sch:VersionNumber>15</sch:VersionNumber>
            <sch:ModificationDate>2008-09-28</sch:ModificationDate>
            <sch:LocalReferenceNumber>21PT980112664200000152</sch:LocalReferenceNumber>
            <sch:TemporaryNumber>123456789012345678</sch:TemporaryNumber>
            <!--Optional:-->
            <sch:DeclarationNumber>123456789012345678</sch:DeclarationNumber>
            <sch:Date>2023-04-13</sch:Date>
            <sch:H6Flag>1</sch:H6Flag>
            <sch:DeclarationCustomsOffice>PT001964</sch:DeclarationCustomsOffice>
            <!--<sch:DeclarationCustomsOffice>PT000095</sch:DeclarationCustomsOffice>-->
            <sch:GoodsPresentationCustomsOffice>12345678</sch:GoodsPresentationCustomsOffice>
            <!--Optional:-->
            <sch:GrossMass>100</sch:GrossMass>
            <!--0 to 99 repetitions:-->            
            <!--Optional:-->
            <sch:AdditionalInformation>
             <sch:Code>12345</sch:Code>
             <sch:Text>1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901</sch:Text>
            </sch:AdditionalInformation>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <!--<sch:SupportDocument>
            <sch:Type>U090</sch:Type>
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:SupportDocument>-->
            <!--0 to 99 repetitions:-->
            <!--Optional:-->
            <sch:AdditionalReference>
             <sch:Type>Y063</sch:Type>
               <!--Optional:-->
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:AdditionalReference>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <sch:TransportDocument>
            <sch:Type>U110</sch:Type>
            <sch:ReferenceNumber>1234567890123456789012345678901234567890123456789012345678901234567890</sch:ReferenceNumber>
            </sch:TransportDocument>
            <sch:TransportDocument>
            <sch:Type>C640</sch:Type>
            <sch:ReferenceNumber>121867890</sch:ReferenceNumber>
            </sch:TransportDocument>
            <!--0 to 99 repetitions:-->
             <!--Optional:-->
            <!--<sch:Authorization>
            <sch:Type>D018</sch:Type>
            <sch:ReferenceNumber>12345678901234567890123456789012345</sch:ReferenceNumber>
             <sch:HolderEORINumber>12345678901234567</sch:HolderEORINumber>
            </sch:Authorization>-->
            <!--Optional:-->
            <sch:SimplifiedAuthorizationFlag>1</sch:SimplifiedAuthorizationFlag>
            <sch:DestinationCountry>CH</sch:DestinationCountry>
            <sch:DispatchingCountry>AL</sch:DispatchingCountry>
             <!--continente-->
            <!--<sch:RegionalCode>50A</sch:RegionalCode>-->
             <!--açores-->
            <!--<sch:RegionalCode>60A</sch:RegionalCode>-->
             <!--madeira-->
            <sch:RegionalCode>70A</sch:RegionalCode>
            <sch:SystemId>0</sch:SystemId>
           <sch:DeclUser>10rfrfrf</sch:DeclUser>
            <!--1 to 5000 repetitions:-->
            <sch:Additions>
               <sch:AdditionNumber>1</sch:AdditionNumber>
               <!--Optional:-->
              <sch:SuplementaryUnit>20</sch:SuplementaryUnit>
               <!--Optional:-->
               <!--<sch:Usfi>20</sch:Usfi>-->
               <!--Optional:-->
               <sch:GrossMass>100</sch:GrossMass>
               <!--Optional:-->
               <sch:NetMass>100</sch:NetMass>
               <!--Optional:-->
              <sch:CusCode>C12345678</sch:CusCode>
               <!--Optional:-->               
               <sch:GoodsCodeSH>010290</sch:GoodsCodeSH>
               <!--Optional:-->
               <sch:GoodsCodeNC>29</sch:GoodsCodeNC>
               <!--Optional:-->
               <sch:GoodsCodeTARIC>30</sch:GoodsCodeTARIC>
               <!--Optional:-->
               <sch:OriginCountryCode>AL</sch:OriginCountryCode>
               <!--Optional:-->
               <sch:PreferredOriginCountry>BR</sch:PreferredOriginCountry>
               <!--Optional:-->
               <sch:DestinationCountry>ES</sch:DestinationCountry>
               <!--Optional:-->
               <!--<sch:DispatchingCountry>CA</sch:DispatchingCountry>-->
               <!--Optional:-->
               <sch:Preference>123</sch:Preference>
               <!--Optional:-->
               <sch:RequestedRegime>12</sch:RequestedRegime>
               <!--0 to 99 repetitions:-->
               <sch:AdditionalRegime>4II</sch:AdditionalRegime>
               <!--Optional:-->
               <!--<sch:QuotaOrderNumber>090113</sch:QuotaOrderNumber>-->
               <!--Optional:-->
               <sch:StatisticalValue>1234567890123456.45</sch:StatisticalValue>
               <!--Optional:-->
               <sch:ValuationMethod>1</sch:ValuationMethod>
               <!--0 to 99 repetitions:-->
               <!--Optional:-->
               <sch:TaxBase>
                  <sch:MeasureUnitAndQualifier>TNEG</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>0.100</sch:Quantity>
               </sch:TaxBase>
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <!--<sch:UnitsForRestrictions>
                  <sch:MeasureUnitAndQualifier>KGM</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>100</sch:Quantity>
               </sch:UnitsForRestrictions>-->
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <sch:UnitsForH6>
                 <sch:MeasureUnitAndQualifier>KGM</sch:MeasureUnitAndQualifier>
                  <sch:Quantity>100</sch:Quantity>
               </sch:UnitsForH6>
               <sch:VatRegime>3</sch:VatRegime>
               <!--0 to 99 repetitions:-->
                <!--Optional:-->
               <sch:AdditionalInformation>
                <sch:Code>34567</sch:Code>
                <sch:Text>234234?</sch:Text>
               </sch:AdditionalInformation>
               <!--0 to 99 repetitions:-->
               <sch:SupportDocument>
                  <sch:Type>U110</sch:Type>
                  <sch:ReferenceNumber>12345</sch:ReferenceNumber>
                   <!--este campo abaixo só pode ser usado nos adicionais:-->
                  <sch:MeasureUnitAndQualifier>1234</sch:MeasureUnitAndQualifier>
               </sch:SupportDocument>
               <!--0 to 99 repetitions:-->
               <sch:AdditionalReference>
                 <sch:Type>3Y48</sch:Type>
                 <sch:ReferenceNumber>12345688</sch:ReferenceNumber>
               </sch:AdditionalReference>
               <!--0 to 99 repetitions:-->
               <!--<sch:TransportDocument>
                <sch:Type>1234</sch:Type>
                <sch:ReferenceNumber>1234</sch:ReferenceNumber>
               </sch:TransportDocument>-->
               <!--0 to 99 repetitions:-->
               <!--<sch:Authorization>
               <sch:Type>1234</sch:Type>
               <sch:ReferenceNumber>12345678901234567890123567890123455</sch:ReferenceNumber>
               <sch:HolderEORINumber>12345678901234567</sch:HolderEORINumber>
               </sch:Authorization>-->
               <!--0 to 99 repetitions:-->
               <sch:SimplifiedAuthorizationFlag>0</sch:SimplifiedAuthorizationFlag>
              <sch:NationalAdditionalCode>1060</sch:NationalAdditionalCode>
               <!--<sch:NationalAdditionalCode>1041</sch:NationalAdditionalCode>-->
                <!--0 to 99 repetitions:-->
                <!--<sch:AdditionalCodeTARIC>F499</sch:AdditionalCodeTARIC>-->
                <!--<sch:AdditionalCodeTARIC>3200</sch:AdditionalCodeTARIC>-->
               <!--Optional:-->
              <sch:CustomsValue>1500</sch:CustomsValue>            
             </sch:Additions>
         </sch:request>
      </sch:SigipimpcauRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="5724d5e9-ddb4-471a-ad07-c57b23736293" name="SOAP Response"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://schema.soap.web.sigipimpcau.sigip.at.gov.pt/SigipimpcauPort/SigipimpcauRequest"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="madeiraAssertion" id="ced11db2-aa20-4598-bf84-b7a8c4393ddb"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils
import com.eviware.soapui.support.XmlHolder

def xmlReq = testRunner.testCase.testSteps['SigipimpcauMadeira'].getPropertyValue("response")
def xmlReq1 = new XmlHolder(xmlReq)

for( node in xmlReq1.getDomNodes( "//*:SigipimpcauResponse/*:response/*:Additions/*:MeasureListPerAddition" )) {
	//log.info(node)
	//log.info("--")
	def applicableMeasure = new XmlHolder(node).getNodeValue("//*:ApplicableMeasure")
	log.info(applicableMeasure)
	if(applicableMeasure == 'IVA'){
		def applicableFee = new XmlHolder(node).getNodeValue("//*:Fee")
		assert (applicableFee.toFloat() == 0.22f)
	}	
}</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite>